Euro DataBot â€” Telegram Bot for ECB and Eurostat Data

Telegram bot to query and visualize macroeconomic and financial data from:

European Central Bank (ECB Data Portal)

Eurostat

ğŸ§  Overview

Goal: enable natural-language queries such as

â€œInflation Italy since 2020â€ or â€œEUR/USD last yearâ€

and return:

a time-series chart, and

a short analytic summary, optionally powered by GPT.

âš™ï¸ Core Stack

Python 3.10+

Aiogram 3 â€“ Telegram bot framework

Pandas, Matplotlib, Geopandas (for maps)

OpenAI GPT (optional) â€“ natural-language intent & summaries

SDMX REST APIs â€“ ECB and Eurostat data backends

ğŸ§© Didactic Principles

SDMX standard: both ECB and Eurostat expose data via SDMX REST.

Series key: an ECB series is FLOW.KEY (e.g. ICP.M.U2.N.000000.4.ANR),
where â€œflowâ€ is the dataset domain and â€œkeyâ€ encodes dimensions.

Frequency & period: D (daily), M (monthly), Q (quarterly), A (annual).
The parser detects â€œsince 2020â€, â€œlast 12 monthsâ€, etc.

Hybrid router: intent detected via deterministic rules (synonyms, regex)
with an optional lightweight LLM for classification (not SDMX codes).

Normalization: all datasets â†’ TIME_PERIOD, OBS_VALUE, COUNTRY.

Visualization: Matplotlib charts; optional map rendering via Geopandas.

Robustness: ECB fetcher supports JSONâ†’CSV fallback;
Eurostat handles aliases (EA20, EA19, EA, U2).

ğŸ§± Architecture
Entry ( Telegram )

main.py â€” bot entrypoint

modules/telegram_bot.py â€” commands, inline menus, message handling

Query Interpretation

modules/llm_router.py â€” detects mode (single/compare/trend), analysis type, and countries

modules/ai_parser.py â€” indicator catalog + synonyms + unified ECB/Eurostat interpreter (optional GPT classifier)

Data

modules/fetchers/ecb_adapter.py â€” ECB fetch + normalization (JSONâ†’CSV fallback)

modules/fetchers/eurostat_adapter.py â€” Eurostat fetch + normalization

Output

modules/plotter.py â€” charts and maps

modules/data_commenter.py â€” analytic summary (AI or numeric fallback)

Config

config/settings.py â€” environment variables (.env)

config/registry.yaml â€” example indicator registry

config/prompts/router_prompt.txt â€” LLM routing prompt (used only if enabled)

ğŸ”„ Request Lifecycle

User message: â€œInflation Euro area since 2020â€

Router: detects intent, countries, and chart type

Parser: builds structured plan â€” provider, flow/dataset, series/pattern, period params

Fetcher: retrieves ECB or Eurostat data and normalizes

Plotter: creates Matplotlib chart â†’ PNG buffer

Commenter: generates 3-line analytic summary (GPT or numeric fallback)

Telegram reply: sends chart + summary to the user

ğŸ§° Installation

Requirements

Python 3.10 or higher

Dependencies in requirements.txt:

aiogram
pandas
matplotlib
requests
openai
python-dotenv
ecbdata
geopandas  # optional for maps


Setup

python -m venv .venv
source .venv/bin/activate   # or .venv\Scripts\activate on Windows
pip install -r requirements.txt

ğŸ”‘ Configuration

Environment variables (via .env, loaded by config/settings.py):

Variable	Required	Description
TELEGRAM_TOKEN	âœ…	BotFather token
OPENAI_API_KEY	â›” optional	Enables GPT classification & summaries

âš ï¸ Note: only one bot instance can poll updates at a time â€”
stop any previous session before relaunching.

â–¶ï¸ Run
python main.py


The bot logs startup and awaits updates.
Use Telegram to send either menu selections or natural-language queries.

ğŸ’¬ Example Queries

English

Inflation Euro area since 2020
ECB deposit rate, last 12 months
EUR/JPY exchange rate
GDP per capita Euro area
Compare unemployment between France and Italy


Italian

Inflazione area euro dal 2020
Tasso di deposito BCE
Disoccupazione Italia
Cambio euro dollaro ultimo anno

ğŸ“ˆ Supported Indicators (excerpt)

See modules/ai_parser.py:

INDICATOR_CATALOG (line 80) â†’ data sources

SYNONYMS (line 130) â†’ text mapping

Examples:

ECB: inflation (ICP), deposit rate (FM), money supply (BSI), loans, 10y yield curve (YC), FX (EXR).

Eurostat: unemployment, employment, debt/GDP, industrial production, poverty rate.

ğŸ—ºï¸ Charts and Maps

Time-series: plotted with Matplotlib (function plot_timeseries)

Maps: optional (requires Geopandas), function plot_map
uses ISO-A2 codes (IT, FR, DE, etc.) with alias handling for UK/GB.

ğŸ§® Robustness & Fallbacks

ECB: JSONâ†’CSV fallback via ecbdata; local cache under data/cache/

Eurostat: SDMX JSON expansion â†’ tidy records; handles EA aliases

Parser: fallback to Euro Area inflation if no match found

Summaries: deterministic numeric bullets when GPT unavailable

ğŸ§  Extend the Bot

Add a new indicator:

Edit INDICATOR_CATALOG in modules/ai_parser.py

provider: ECB or Eurostat

For ECB: add flow, series, freq

For Eurostat: add dataset, base params

Add synonyms in SYNONYMS (same file).

(Optional) enable LLM classification for fuzzy queries.

ğŸ“‚ Repository Structure
File	Description
main.py	Entrypoint
modules/telegram_bot.py	Telegram logic (commands/menus/replies)
modules/llm_router.py	Intent routing and context
modules/ai_parser.py	Indicator catalog & unified ECB/Eurostat interpreter
modules/fetchers/ecb_adapter.py	ECB fetch + normalization
modules/fetchers/eurostat_adapter.py	Eurostat fetch + normalization
modules/plotter.py	Charts and maps
modules/data_commenter.py	AI or fallback summary
config/settings.py	Environment variables
config/registry.yaml	Example indicator registry
config/prompts/router_prompt.txt	Routing prompt (if LLM enabled)
âš ï¸ Limits and Notes

Data quality depends on ECB/Eurostat availability.

LLM classification is only an aid; mapping lives in the catalog.

GPT usage incurs costs â€” validate keys and monitor.

Encoding: avoid non-standard emojis in stored text for portability.

ğŸ”— References

ECB Data Portal (SDMX): https://data.ecb.europa.eu/

Eurostat API: https://ec.europa.eu/eurostat/

SDMX Standard: https://sdmx.org/

Aiogram Docs: https://docs.aiogram.dev/

Pandas: https://pandas.pydata.org/

Matplotlib: https://matplotlib.org/

Geopandas: https://geopandas.org/

âœ… End of README (English final version)